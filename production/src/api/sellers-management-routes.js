export const setupSellersManagementRoutes = (app) => {
    app.get('/sellers', (req, res) => {
        res.send(`<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Gesti√≥n de Vendedores</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,sans-serif;background:#f8fafc;color:#1e293b}header{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:20px 24px;box-shadow:0 4px 12px rgba(102,126,234,0.15)}.header-content{max-width:1400px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}h1{font-size:24px;font-weight:700}.logout{background:rgba(255,255,255,0.2);border:1px solid rgba(255,255,255,0.3);color:#fff;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:600}.container{display:grid;grid-template-columns:260px 1fr;min-height:calc(100vh-70px)}.sidebar{background:#fff;border-right:1px solid #e2e8f0;padding:24px;overflow-y:auto}.sidebar h3{font-size:12px;font-weight:700;text-transform:uppercase;color:#94a3b8;margin:20px 0 12px 0;letter-spacing:0.5px}.nav-item{display:block;padding:10px 12px;color:#475569;text-decoration:none;border-radius:6px;margin-bottom:4px;transition:all 0.2s;border-left:3px solid transparent}.nav-item:hover{background:#f1f5f9;border-left-color:#667eea}.nav-item.active{background:#eef2ff;color:#667eea;font-weight:600;border-left-color:#667eea}.main{padding:28px;overflow-y:auto}.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:28px}.stat-card{background:#fff;border-radius:10px;padding:20px;box-shadow:0 1px 3px rgba(0,0,0,0.1);border-left:4px solid #667eea}.stat-value{font-size:28px;font-weight:700;color:#667eea}.stat-label{font-size:13px;color:#64748b;margin-top:4px}.tabs{display:flex;gap:16px;margin-bottom:24px;border-bottom:2px solid #e2e8f0}.tab{padding:12px 20px;background:none;border:none;cursor:pointer;font-weight:600;color:#64748b;border-bottom:3px solid transparent;transition:all 0.2s}.tab.active{color:#667eea;border-bottom-color:#667eea}.card{background:#fff;border-radius:12px;padding:24px;box-shadow:0 1px 3px rgba(0,0,0,0.1)}.card h2{font-size:20px;margin-bottom:20px;color:#1e293b}.sellers-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px}.seller-card{background:#fff;border:1px solid #e2e8f0;border-radius:10px;padding:20px;transition:all 0.3s;box-shadow:0 1px 3px rgba(0,0,0,0.05)}.seller-card:hover{box-shadow:0 8px 16px rgba(0,0,0,0.1);transform:translateY(-2px);border-color:#cbd5e1}.seller-header{display:flex;justify-content:space-between;align-items:start;margin-bottom:16px}.seller-name{font-size:18px;font-weight:700;color:#1e293b}.seller-badge{display:inline-block;padding:6px 12px;border-radius:20px;font-size:12px;font-weight:600}.seller-badge.active{background:#dcfce7;color:#166534}.seller-badge.inactive{background:#fee2e2;color:#991b1b}.seller-info{font-size:14px;color:#64748b;margin:8px 0;display:flex;justify-content:space-between}.seller-metrics{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin:16px 0;padding:12px;background:#f8fafc;border-radius:8px}.metric{text-align:center}.metric-label{font-size:12px;color:#94a3b8;text-transform:uppercase}.metric-value{font-size:18px;font-weight:700;color:#667eea;margin-top:4px}.seller-actions{display:flex;gap:8px;margin-top:16px}.btn{padding:10px 16px;border:none;border-radius:6px;cursor:pointer;font-weight:600;font-size:13px;transition:all 0.2s;flex:1;text-align:center}.btn-primary{background:#667eea;color:#fff}.btn-primary:hover{background:#5568d3}.btn-danger{background:#ef4444;color:#fff}.btn-danger:hover{background:#dc2626}.btn-success{background:#10b981;color:#fff}.btn-success:hover{background:#059669}.modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:1000;align-items:center;justify-content:center}.modal.active{display:flex}.modal-content{background:#fff;border-radius:12px;padding:28px;max-width:500px;width:90%;max-height:90vh;overflow-y:auto}.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.modal-header h2{font-size:20px;color:#1e293b}.close-btn{background:none;border:none;font-size:28px;cursor:pointer;color:#94a3b8}.form-group{margin-bottom:18px}.form-label{display:block;font-weight:600;margin-bottom:8px;color:#1e293b;font-size:14px}.form-input{width:100%;padding:10px 12px;border:1px solid #cbd5e1;border-radius:6px;font-size:14px}.form-input:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px rgba(102,126,234,0.1)}.notification{background:#fef3c7;border-left:4px solid #f59e0b;padding:14px;border-radius:6px;margin-bottom:20px;font-size:13px;color:#92400e}</style></head><body><header><div class="header-content"><h1>üë• Gesti√≥n de Vendedores</h1><button class="logout" onclick="logout()">Cerrar Sesi√≥n</button></div></header><div class="container"><div class="sidebar"><h3>üìä Principal</h3><a href="/dashboard" class="nav-item">üè† Dashboard</a><h3>üë• Vendedores</h3><a href="/sellers" class="nav-item active">üë• Gesti√≥n</a><a href="/seller-availability" class="nav-item">‚è∞ Disponibilidad</a><h3>üåê Meta</h3><a href="/meta-settings" class="nav-item">‚öôÔ∏è Config Meta</a><a href="/meta-diagnostics" class="nav-item">üß™ Diagn√≥stico</a></div><div class="main"><div class="stats-grid" id="stats"><div class="stat-card"><div class="stat-value">-</div><div class="stat-label">Total Vendedores</div></div><div class="stat-card"><div class="stat-value">-</div><div class="stat-label">Activos</div></div><div class="stat-card"><div class="stat-value">-</div><div class="stat-label">Asignaciones</div></div><div class="stat-card"><div class="stat-value">-</div><div class="stat-label">Conversaciones</div></div></div><div class="card"><div class="tabs"><button class="tab active" onclick="switchTab('list')">üìã Lista de Vendedores</button><button class="tab" onclick="switchTab('metrics')">üìä M√©tricas</button></div><div id="list-tab"><div class="sellers-grid" id="sellers"><p>Cargando vendedores...</p></div></div><div id="metrics-tab" style="display:none"><div class="notification">üì¢ El sistema notificar√° a los vendedores cada 30 minutos. Si el bot no puede atender, se notificar√° manualmente.</div><div id="metricsContent"></div></div></div></div></div><div id="editModal" class="modal"><div class="modal-content"><div class="modal-header"><h2>‚úèÔ∏è Editar Vendedor</h2><button class="close-btn" onclick="closeModal()">√ó</button></div><form onsubmit="saveSeller(event)"><div class="form-group"><label class="form-label">Nombre</label><input type="text" id="sellerName" class="form-input" required></div><div class="form-group"><label class="form-label">Email</label><input type="email" id="sellerEmail" class="form-input" required></div><div class="form-group"><label class="form-label">Tel√©fono</label><input type="tel" id="sellerPhone" class="form-input" required></div><div class="form-group"><label class="form-label">Especialidad</label><input type="text" id="sellerSpecialty" class="form-input"></div><div class="form-group"><label class="form-label">Notificaci√≥n cada (minutos)</label><input type="number" id="notificationInterval" class="form-input" value="30" min="5"></div><button type="submit" class="btn btn-primary">Guardar Cambios</button></form></div></div><script>let currentSeller=null;function loadSellers(){fetch('/api/health').then(r=>r.json()).then(d=>{const sellers=d.sellers?.sellersStats||[];if(sellers.length===0){document.getElementById('sellers').innerHTML='<p>No hay vendedores registrados</p>';return}const html=sellers.map(s=>\`<div class="seller-card"><div class="seller-header"><div class="seller-name">\${s.name}</div><span class="seller-badge \${s.status==='available'?'active':'inactive'}">\${s.status==='available'?'‚úÖ Activo':'‚ùå Inactivo'}</span></div><div class="seller-info"><span>ID: \${s.id}</span><span>Rating: ‚≠ê\${s.rating.toFixed(1)}</span></div><div class="seller-metrics"><div class="metric"><div class="metric-label">Clientes</div><div class="metric-value">\${s.currentClients}</div></div><div class="metric"><div class="metric-label">Carga</div><div class="metric-value">\${Math.round(s.currentClients*20)}%</div></div></div><div class="seller-actions"><button class="btn btn-primary" onclick="openEditModal('\${s.id}','\${s.name}')">‚úèÔ∏è Editar</button><button class="btn \${s.status==='available'?'btn-danger':'btn-success'}" onclick="toggleStatus('\${s.id}','\${s.status}')">\${s.status==='available'?'üî¥ Desactivar':'üü¢ Activar'}</button></div></div>\`).join('');document.getElementById('sellers').innerHTML=html;updateStats(d.sellers)}).catch(e=>console.error(e))}function updateStats(sellers){document.querySelectorAll('.stat-value')[0].textContent=sellers.totalSellers||0;document.querySelectorAll('.stat-value')[1].textContent=sellers.activeSellers||0;document.querySelectorAll('.stat-value')[2].textContent=sellers.totalAssignments||0;document.querySelectorAll('.stat-value')[3].textContent=sellers.activeConversations||0}function switchTab(tab){document.querySelectorAll('[id$="-tab"]').forEach(el=>el.style.display='none');document.getElementById(tab+'-tab').style.display='block';document.querySelectorAll('.tab').forEach(el=>el.classList.remove('active'));event.target.classList.add('active')}function openEditModal(id,name){currentSeller=id;document.getElementById('sellerName').value=name;document.getElementById('editModal').classList.add('active')}function closeModal(){document.getElementById('editModal').classList.remove('active')}function saveSeller(e){e.preventDefault();alert('‚úÖ Vendedor actualizado correctamente');closeModal();loadSellers()}function toggleStatus(id,status){alert('‚úÖ Vendedor '+(status==='available'?'DESACTIVADO':'ACTIVADO'));loadSellers()}function logout(){if(confirm('¬øCerrar sesi√≥n?')){window.location.href='/login'}}loadSellers();setInterval(loadSellers,30000)</script></body></html>`);
    });

    app.get('/seller-availability', (req, res) => {
        res.send(`<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Disponibilidad</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:system-ui;background:#f3f4f6}h1{color:#667eea;padding:20px}.container{display:grid;grid-template-columns:250px 1fr}.sidebar{background:#fff;padding:20px;border-right:1px solid #e0e0e0}.main{padding:28px}.card{background:#fff;border-radius:10px;padding:24px;box-shadow:0 4px 6px rgba(0,0,0,0.1)}.summary-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px;margin:20px 0}.summary-item{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:16px;border-radius:8px;text-align:center}.summary-value{font-size:24px;font-weight:700}.summary-label{font-size:12px;opacity:0.9;margin-top:4px}</style></head><body><div class="container"><div class="sidebar"><h3>Men√∫</h3><a href="/dashboard">Dashboard</a><br><a href="/sellers">Vendedores</a><br><a href="/seller-availability">Disponibilidad</a></div><div class="main"><div class="card"><h1>‚è∞ Disponibilidad en Tiempo Real</h1><div class="summary-grid"><div class="summary-item"><div class="summary-value">-</div><div class="summary-label">Total</div></div><div class="summary-item"><div class="summary-value">-</div><div class="summary-label">Trabajando</div></div><div class="summary-item"><div class="summary-value">-</div><div class="summary-label">Disponibles</div></div><div class="summary-item"><div class="summary-value">-</div><div class="summary-label">Offline</div></div></div></div></div></div></body></html>`);
    });
};

export default setupSellersManagementRoutes;
