/*! For license information please see 340.a37731f8.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkcocolu_dashboard=self.webpackChunkcocolu_dashboard||[]).push([[340],{516:(e,s,i)=>{i.d(s,{A:()=>a});const a=(0,i(8995).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4319:(e,s,i)=>{i.d(s,{A:()=>a});const a=(0,i(8995).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5088:(e,s,i)=>{i.d(s,{A:()=>a});const a=(0,i(8995).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6340:(e,s,i)=>{i.r(s),i.d(s,{default:()=>k});var a=i(2555),t=i(5043),n=i(7701),r=i(4319),l=i(9875),o=i(8995);const c=(0,o.A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),d=(0,o.A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),h=(0,o.A)("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),u=(0,o.A)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var m=i(3768);const p=(0,o.A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var x=i(5088),v=i(516),j=i(579);function g(e){let{fieldKey:s,fieldLabel:i,isOpen:a,onClose:n,onRestore:r}=e;const[l,o]=(0,t.useState)([]),[c,h]=(0,t.useState)(!1);(0,t.useEffect)(()=>{a&&s&&u()},[a,s]);const u=async()=>{h(!0);try{const e=await fetch("/api/meta/config/history/".concat(s)),i=await e.json();i.success?o(i.history||[]):m.Ay.error("Error cargando hist\xf3rico")}catch(e){console.error("Error loading history:",e),m.Ay.error("Error cargando hist\xf3rico")}finally{h(!1)}},g=e=>{if(!e)return"N/A";return new Date(e).toLocaleString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return a?(0,j.jsx)("div",{className:"credential-history-overlay",onClick:n,children:(0,j.jsxs)("div",{className:"credential-history-modal",onClick:e=>e.stopPropagation(),children:[(0,j.jsxs)("div",{className:"modal-header",children:[(0,j.jsxs)("div",{className:"modal-title",children:[(0,j.jsx)(d,{size:20}),(0,j.jsxs)("h3",{children:["Hist\xf3rico: ",i]})]}),(0,j.jsx)("button",{onClick:n,className:"btn-close-modal",children:(0,j.jsx)(p,{size:20})})]}),(0,j.jsx)("div",{className:"modal-body",children:c?(0,j.jsxs)("div",{className:"loading-state",children:[(0,j.jsx)("div",{className:"spinner"}),(0,j.jsx)("p",{children:"Cargando hist\xf3rico..."})]}):0===l.length?(0,j.jsxs)("div",{className:"empty-state",children:[(0,j.jsx)(d,{size:48}),(0,j.jsx)("p",{children:"No hay cambios registrados"}),(0,j.jsx)("span",{className:"help-text",children:"Los cambios aparecer\xe1n aqu\xed cuando guardes la configuraci\xf3n"})]}):(0,j.jsx)("div",{className:"history-list",children:l.map((e,s)=>{return(0,j.jsxs)("div",{className:"history-item",children:[(0,j.jsxs)("div",{className:"history-item-header",children:[(0,j.jsx)("div",{className:"history-badge",children:0===s?"Actual":"v".concat(l.length-s)}),(0,j.jsxs)("div",{className:"history-date",children:[(0,j.jsx)(x.A,{size:14}),g(e.changed_at)]})]}),(0,j.jsx)("div",{className:"history-value",children:(0,j.jsx)("code",{children:(i=e.value,i?i.length>20?i.substring(0,15)+"..."+i.substring(i.length-5):i:"(vac\xedo)")})}),(0,j.jsxs)("div",{className:"history-item-footer",children:[(0,j.jsxs)("span",{className:"changed-by",children:["por ",e.changed_by||"admin"]}),0!==s&&(0,j.jsxs)("button",{onClick:()=>(e=>{r&&(r(e),m.Ay.success("Valor restaurado"),n())})(e.value),className:"btn-restore",children:[(0,j.jsx)(v.A,{size:14}),"Restaurar"]})]})]},s);var i})})}),(0,j.jsxs)("div",{className:"modal-footer",children:[(0,j.jsxs)("button",{onClick:u,className:"btn-refresh",children:[(0,j.jsx)(v.A,{size:16}),"Actualizar"]}),(0,j.jsx)("button",{onClick:n,className:"btn-close",children:"Cerrar"})]})]})}):null}const y=(0,o.A)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),b=(0,o.A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),N=(0,o.A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function f(e){let{logs:s,onClear:i}=e;const[a,n]=(0,t.useState)(!0),[r,l]=(0,t.useState)(!1),[o,d]=(0,t.useState)(null),h=e=>({request:"\u2192",response:"\u2190",success:"\u2713",error:"\u2717",info:"\u2139"}[e]||"\u2139"),u=e=>{if("request"!==e.type||!e.requestDetails)return null;const{method:s,url:i,headers:a,body:t}=e.requestDetails;let n="curl - X ".concat(s," '").concat(i,"'");return a&&Object.entries(a).forEach(e=>{let[s,i]=e;n+=" \\\n - H '".concat(s,": ").concat(i,"'")}),t&&(n+=" \\\n - d '".concat(JSON.stringify(t,null,2),"'")),n};return r?(0,j.jsxs)("div",{className:"debug-console minimized",onClick:()=>l(!1),children:[(0,j.jsx)(y,{size:16}),(0,j.jsxs)("span",{children:["Console (",s.length,")"]})]}):(0,j.jsxs)("div",{className:"debug - console ".concat(a?"expanded":"collapsed"," "),children:[(0,j.jsxs)("div",{className:"console-header",children:[(0,j.jsxs)("div",{className:"console-title",children:[(0,j.jsx)(y,{size:16}),(0,j.jsx)("span",{children:"Technical Debug Console"}),(0,j.jsxs)("span",{className:"log-count",children:[s.length," logs"]})]}),(0,j.jsxs)("div",{className:"console-actions",children:[(0,j.jsx)("button",{onClick:i,className:"btn-clear",title:"Limpiar",children:"Clear"}),(0,j.jsx)("button",{onClick:()=>n(!a),className:"btn-toggle",title:a?"Colapsar":"Expandir",children:a?(0,j.jsx)(b,{size:16}):(0,j.jsx)(N,{size:16})}),(0,j.jsx)("button",{onClick:()=>l(!0),className:"btn-minimize",title:"Minimizar",children:(0,j.jsx)(p,{size:16})})]})]}),a&&(0,j.jsx)("div",{className:"console-body",children:0===s.length?(0,j.jsxs)("div",{className:"console-empty",children:[(0,j.jsx)(y,{size:32}),(0,j.jsx)("p",{children:"No hay logs. Las operaciones HTTP aparecer\xe1n aqu\xed."})]}):(0,j.jsx)("div",{className:"console-logs",children:s.map((e,s)=>{return(0,j.jsxs)("div",{className:"log - entry ".concat((a=e.type,{request:"log-request",response:"log-response",success:"log-success",error:"log-error",info:"log-info"}[a]||"log-info")," "),children:[(0,j.jsxs)("div",{className:"log-header",onClick:()=>d(o===s?null:s),children:[(0,j.jsx)("span",{className:"log-icon",children:h(e.type)}),(0,j.jsx)("span",{className:"log-time",children:(i=e.timestamp,new Date(i).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}))}),(0,j.jsx)("span",{className:"log-method",children:e.method}),(0,j.jsx)("span",{className:"log-endpoint",children:e.endpoint}),e.statusCode&&(0,j.jsx)("span",{className:"log - status ".concat(e.statusCode<400?"success":"error"," "),children:e.statusCode}),e.duration&&(0,j.jsxs)("span",{className:"log-duration",children:[e.duration,"ms"]})]}),o===s&&(0,j.jsxs)("div",{className:"log-details",children:[e.requestDetails&&(0,j.jsxs)("div",{className:"detail-section",children:[(0,j.jsxs)("div",{className:"detail-header",children:[(0,j.jsx)("span",{children:"\ud83d\udccb cURL Command"}),(0,j.jsx)("button",{onClick:()=>{return s=u(e),navigator.clipboard.writeText(s),void m.Ay.success("\u2705 Copiado al portapapeles");var s},className:"btn-copy-small",children:(0,j.jsx)(c,{size:12})})]}),(0,j.jsx)("pre",{className:"curl-command",children:u(e)})]}),e.requestDetails&&(0,j.jsxs)("div",{className:"detail-section",children:[(0,j.jsx)("div",{className:"detail-header",children:"\u2192 Request Details"}),e.requestDetails.headers&&(0,j.jsxs)("div",{className:"detail-subsection",children:[(0,j.jsx)("div",{className:"subsection-title",children:"Headers:"}),(0,j.jsx)("pre",{children:JSON.stringify(e.requestDetails.headers,null,2)})]}),e.requestDetails.body&&(0,j.jsxs)("div",{className:"detail-subsection",children:[(0,j.jsx)("div",{className:"subsection-title",children:"Payload:"}),(0,j.jsx)("pre",{children:JSON.stringify(e.requestDetails.body,null,2)})]})]}),e.responseDetails&&(0,j.jsxs)("div",{className:"detail-section",children:[(0,j.jsx)("div",{className:"detail-header",children:"\u2190 Response Details"}),(0,j.jsx)("div",{className:"detail-subsection",children:(0,j.jsxs)("div",{className:"subsection-title",children:["Status: ",e.statusCode," ",e.responseDetails.statusText]})}),e.responseDetails.headers&&(0,j.jsxs)("div",{className:"detail-subsection",children:[(0,j.jsx)("div",{className:"subsection-title",children:"Response Headers:"}),(0,j.jsx)("pre",{children:JSON.stringify(e.responseDetails.headers,null,2)})]}),e.responseDetails.data&&(0,j.jsxs)("div",{className:"detail-subsection",children:[(0,j.jsx)("div",{className:"subsection-title",children:"Response Body:"}),(0,j.jsx)("pre",{children:JSON.stringify(e.responseDetails.data,null,2)})]})]}),e.message&&(0,j.jsx)("div",{className:"log-message",children:e.message})]})]},s);var i,a})})})]})}var A=i(3404);function k(){const{config:e,saveConfig:s,testMessage:i,isSaving:o,isTesting:p}=(0,n.Vp)(),[x,v]=t.useState({}),[y,b]=t.useState(!1),[N,k]=t.useState(null),[C,T]=t.useState([]);t.useEffect(()=>{e&&v(e)},[e]),t.useEffect(()=>A.Z.addListener(e=>{T(s=>[...s,e])}),[]);const E=(e,s,i,a,t)=>{const n={type:e,method:s,endpoint:i,data:a,message:t,timestamp:(new Date).toISOString()};T(e=>[...e,n])},S=(e,s)=>{E("info","COPY","/clipboard",{text:e,label:s},"Copiando ".concat(s," al portapapeles")),navigator.clipboard.writeText(e),m.Ay.success("\u2705 ".concat(s," copiado"))},M=(e,s)=>{E("info","OPEN","/history-modal",{fieldKey:e,fieldLabel:s},"Abriendo hist\xf3rico de ".concat(s)),k({key:e,label:s}),b(!0)};if(!e)return(0,j.jsxs)("div",{className:"meta-setup loading",children:[(0,j.jsx)("div",{className:"spinner"}),(0,j.jsx)("p",{children:"Cargando configuraci\xf3n..."})]});const w=x.jwtToken&&x.numberId&&x.businessId;return(0,j.jsxs)("div",{className:"meta-setup",children:[(0,j.jsxs)("div",{className:"page-header",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("h1",{children:"\ud83c\udf10 Configuraci\xf3n Meta WhatsApp"}),(0,j.jsx)("p",{className:"subtitle",children:"WhatsApp Business API Setup"})]}),(0,j.jsx)("div",{className:"header-badge",children:w?(0,j.jsxs)("span",{className:"status-badge configured",children:[(0,j.jsx)(r.A,{size:16}),"Configurado"]}):(0,j.jsxs)("span",{className:"status-badge missing",children:[(0,j.jsx)(l.A,{size:16}),"Sin configurar"]})})]}),(0,j.jsxs)("div",{className:"info-section",children:[(0,j.jsxs)("div",{className:"info-card webhook",children:[(0,j.jsx)("div",{className:"info-label",children:"Webhook URL para Meta (Read-Only)"}),(0,j.jsxs)("div",{className:"info-value-group",children:[(0,j.jsx)("code",{className:"info-value",children:x.webhookUrl}),(0,j.jsx)("button",{onClick:()=>S(x.webhookUrl,"Webhook URL"),className:"btn-copy",children:(0,j.jsx)(c,{size:16})})]}),(0,j.jsx)("p",{className:"info-help",children:"Configura este URL en Meta Developers (no editable)"})]}),(0,j.jsxs)("div",{className:"info-card token",children:[(0,j.jsx)("div",{className:"info-label",children:"Verify Token (Editable)"}),(0,j.jsxs)("div",{className:"info-value-group",children:[(0,j.jsx)("input",{type:"text",value:x.verifyToken||"",onChange:e=>v((0,a.A)((0,a.A)({},x),{},{verifyToken:e.target.value})),placeholder:"cocolu_webhook_verify_...",className:"form-input"}),(0,j.jsx)("button",{onClick:()=>S(x.verifyToken,"Verify Token"),className:"btn-copy",children:(0,j.jsx)(c,{size:16})})]}),(0,j.jsx)("p",{className:"info-help",children:"Token personalizado para verificar el webhook"})]})]}),(0,j.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),E("request","POST","/api/meta/config",x,"Guardando configuraci\xf3n...");try{const e=await s(x);E("response","POST","/api/meta/config",e,"Configuraci\xf3n guardada exitosamente"),E("success","SAVE","/api/meta/config",null,"\u2713 Configuraci\xf3n actualizada en base de datos"),m.Ay.success("Configuraci\xf3n guardada exitosamente")}catch(i){E("error","POST","/api/meta/config",{error:i.message},"Error al guardar configuraci\xf3n"),m.Ay.error(i.message||"Error al guardar configuraci\xf3n")}},className:"config-form",children:[(0,j.jsxs)("div",{className:"form-section",children:[(0,j.jsx)("h2",{children:"\ud83d\udcdd Credenciales Meta"}),(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsx)("label",{children:"JWT Token (Access Token)"}),(0,j.jsxs)("div",{className:"input-with-history",children:[(0,j.jsx)("input",{type:"password",value:x.jwtToken||"",onChange:e=>v((0,a.A)((0,a.A)({},x),{},{jwtToken:e.target.value})),placeholder:"EAAxxxxxxxxxxxxx...",className:"form-input"}),(0,j.jsxs)("button",{type:"button",onClick:()=>M("META_JWT_TOKEN","JWT Token"),className:"btn-history",title:"Ver hist\xf3rico de cambios",children:[(0,j.jsx)(d,{size:16}),(0,j.jsx)("span",{children:"Hist\xf3rico"})]})]}),(0,j.jsx)("span",{className:"help-text",children:"Obt\xe9n tu Access Token desde Meta Developers \u2192 App Settings"})]}),(0,j.jsxs)("div",{className:"form-row",children:[(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsx)("label",{children:"Phone Number ID"}),(0,j.jsxs)("div",{className:"input-with-history",children:[(0,j.jsx)("input",{type:"text",value:x.numberId||"",onChange:e=>v((0,a.A)((0,a.A)({},x),{},{numberId:e.target.value})),placeholder:"123456789012345",className:"form-input"}),(0,j.jsxs)("button",{type:"button",onClick:()=>M("META_NUMBER_ID","Phone Number ID"),className:"btn-history",title:"Ver hist\xf3rico de cambios",children:[(0,j.jsx)(d,{size:16}),(0,j.jsx)("span",{children:"Hist\xf3rico"})]})]})]}),(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsx)("label",{children:"Business Account ID"}),(0,j.jsxs)("div",{className:"input-with-history",children:[(0,j.jsx)("input",{type:"text",value:x.businessId||"",onChange:e=>v((0,a.A)((0,a.A)({},x),{},{businessId:e.target.value})),placeholder:"987654321098765",className:"form-input"}),(0,j.jsxs)("button",{type:"button",onClick:()=>M("META_BUSINESS_ACCOUNT_ID","Business Account ID"),className:"btn-history",title:"Ver hist\xf3rico de cambios",children:[(0,j.jsx)(d,{size:16}),(0,j.jsx)("span",{children:"Hist\xf3rico"})]})]})]})]}),(0,j.jsxs)("div",{className:"form-row",children:[(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsx)("label",{children:"API Version"}),(0,j.jsxs)("select",{value:x.apiVersion||"v22.0",onChange:e=>v((0,a.A)((0,a.A)({},x),{},{apiVersion:e.target.value})),className:"form-input",children:[(0,j.jsx)("option",{value:"v18.0",children:"v18.0"}),(0,j.jsx)("option",{value:"v19.0",children:"v19.0"}),(0,j.jsx)("option",{value:"v20.0",children:"v20.0"}),(0,j.jsx)("option",{value:"v21.0",children:"v21.0"}),(0,j.jsx)("option",{value:"v22.0",children:"v22.0 (Latest)"})]})]}),(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsx)("label",{children:"N\xfamero de Tel\xe9fono (para pruebas)"}),(0,j.jsx)("input",{type:"tel",value:x.phoneNumber||"",onChange:e=>v((0,a.A)((0,a.A)({},x),{},{phoneNumber:e.target.value})),placeholder:"+1xxxxxxxxxx",className:"form-input"})]})]})]}),(0,j.jsx)("div",{className:"form-actions",children:(0,j.jsxs)("div",{className:"actions-right",children:[(0,j.jsxs)("button",{type:"button",onClick:async()=>{const e={to:x.phoneNumber,message:"\ud83e\uddea Test desde Dashboard - "+(new Date).toLocaleString()};E("request","POST","/api/meta/test",e,"Enviando mensaje de prueba...");try{await i(e),E("success","TEST","/api/meta/test",null,"\u2713 Mensaje de prueba enviado")}catch(s){E("error","TEST","/api/meta/test",{error:s.message},"Error al enviar mensaje de prueba")}},disabled:!w||p,className:"btn-test",children:[(0,j.jsx)(h,{size:16}),p?"Enviando...":"Enviar Test"]}),(0,j.jsxs)("button",{type:"submit",disabled:o,className:"btn-save btn-save-primary",children:[(0,j.jsx)(u,{size:20}),o?"Guardando...":"Guardar Cambios"]})]})})]}),(0,j.jsxs)("div",{className:"instructions-section",children:[(0,j.jsx)("h2",{children:"\ud83d\udcd6 Instrucciones"}),(0,j.jsxs)("ol",{className:"instructions-list",children:[(0,j.jsxs)("li",{children:["Ve a ",(0,j.jsx)("a",{href:"https://developers.facebook.com",target:"_blank",rel:"noopener noreferrer",children:"Meta Developers"})]}),(0,j.jsx)("li",{children:"Selecciona tu App de WhatsApp Business API"}),(0,j.jsx)("li",{children:'En "WhatsApp" \u2192 "Configuration", configura el Webhook URL y Verify Token'}),(0,j.jsx)("li",{children:'Copia tu Access Token desde "App Settings" \u2192 "Basic"'}),(0,j.jsx)("li",{children:"Obt\xe9n tu Phone Number ID y Business Account ID"}),(0,j.jsx)("li",{children:"P\xe9galos aqu\xed y guarda la configuraci\xf3n"}),(0,j.jsx)("li",{children:"Haz una prueba enviando un mensaje de test"})]})]}),N&&(0,j.jsx)(g,{fieldKey:N.key,fieldLabel:N.label,isOpen:y,onClose:()=>{b(!1),k(null)},onRestore:e=>{if(!N)return;const s={META_JWT_TOKEN:"jwtToken",META_NUMBER_ID:"numberId",META_BUSINESS_ACCOUNT_ID:"businessId",META_VERIFY_TOKEN:"verifyToken",META_API_VERSION:"apiVersion",PHONE_NUMBER:"phoneNumber"}[N.key];s&&(E("success","RESTORE","/history/".concat(N.key),{field:N.label,value:e},"\u2713 Valor restaurado: ".concat(N.label)),v((0,a.A)((0,a.A)({},x),{},{[s]:e})))}}),(0,j.jsx)(f,{logs:C,onClear:()=>{T([])}})]})}},7701:(e,s,i)=>{i.d(s,{Wz:()=>S,Vp:()=>E});var a,t,n,r,l,o=i(3248),c=i(2532),d=i(2555),h=i(5043),u=i(9790),m=i(5149),p=i(8458),x=i(6562),v=i(4558),j=i(5239),g=i(1454),y=i(329),b=i(9723),N=(a=new WeakMap,t=new WeakMap,n=new WeakMap,r=new WeakMap,l=new WeakSet,class extends y.Q{constructor(e,s){super(),(0,u.A)(this,l),(0,m.A)(this,a,void 0),(0,m.A)(this,t,void 0),(0,m.A)(this,n,void 0),(0,m.A)(this,r,void 0),(0,v.A)(a,this,e),this.setOptions(s),this.bindMethods(),(0,x.A)(l,this,f).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var s;const i=this.options;this.options=(0,p.A)(a,this).defaultMutationOptions(e),(0,b.f8)(this.options,i)||(0,p.A)(a,this).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,p.A)(n,this),observer:this}),null!==i&&void 0!==i&&i.mutationKey&&this.options.mutationKey&&(0,b.EN)(i.mutationKey)!==(0,b.EN)(this.options.mutationKey)?this.reset():"pending"===(null===(s=(0,p.A)(n,this))||void 0===s?void 0:s.state.status)&&(0,p.A)(n,this).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null===(e=(0,p.A)(n,this))||void 0===e||e.removeObserver(this))}onMutationUpdate(e){(0,x.A)(l,this,f).call(this),(0,x.A)(l,this,A).call(this,e)}getCurrentResult(){return(0,p.A)(t,this)}reset(){var e;null===(e=(0,p.A)(n,this))||void 0===e||e.removeObserver(this),(0,v.A)(n,this,void 0),(0,x.A)(l,this,f).call(this),(0,x.A)(l,this,A).call(this)}mutate(e,s){var i;return(0,v.A)(r,this,s),null===(i=(0,p.A)(n,this))||void 0===i||i.removeObserver(this),(0,v.A)(n,this,(0,p.A)(a,this).getMutationCache().build((0,p.A)(a,this),this.options)),(0,p.A)(n,this).addObserver(this),(0,p.A)(n,this).execute(e)}});function f(){var e,s;const i=null!==(e=null===(s=(0,p.A)(n,this))||void 0===s?void 0:s.state)&&void 0!==e?e:(0,j.$)();(0,v.A)(t,this,(0,d.A)((0,d.A)({},i),{},{isPending:"pending"===i.status,isSuccess:"success"===i.status,isError:"error"===i.status,isIdle:"idle"===i.status,mutate:this.mutate,reset:this.reset}))}function A(e){g.jG.batch(()=>{if((0,p.A)(r,this)&&this.hasListeners()){const u=(0,p.A)(t,this).variables,m=(0,p.A)(t,this).context,x={client:(0,p.A)(a,this),meta:this.options.meta,mutationKey:this.options.mutationKey};var s,i,n,l;if("success"===(null===e||void 0===e?void 0:e.type))null===(s=(i=(0,p.A)(r,this)).onSuccess)||void 0===s||s.call(i,e.data,u,m,x),null===(n=(l=(0,p.A)(r,this)).onSettled)||void 0===n||n.call(l,e.data,null,u,m,x);else if("error"===(null===e||void 0===e?void 0:e.type)){var o,c,d,h;null===(o=(c=(0,p.A)(r,this)).onError)||void 0===o||o.call(c,e.error,u,m,x),null===(d=(h=(0,p.A)(r,this)).onSettled)||void 0===d||d.call(h,void 0,e.error,u,m,x)}}this.listeners.forEach(e=>{e((0,p.A)(t,this))})})}function k(e,s){const i=(0,o.jE)(s),[a]=h.useState(()=>new N(i,e));h.useEffect(()=>{a.setOptions(e)},[a,e]);const t=h.useSyncExternalStore(h.useCallback(e=>a.subscribe(g.jG.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),n=h.useCallback((e,s)=>{a.mutate(e,s).catch(b.lQ)},[a]);if(t.error&&(0,b.GU)(a.options.throwOnError,[t.error]))throw t.error;return(0,d.A)((0,d.A)({},t),{},{mutate:n,mutateAsync:t.mutate})}var C=i(6305),T=i(3768);function E(){const e=(0,o.jE)(),{data:s,isLoading:i,error:a}=(0,c.I)({queryKey:["meta-config"],queryFn:C.O.getConfig,staleTime:3e4}),t=k({mutationFn:C.O.saveConfig,onSuccess:()=>{e.invalidateQueries(["meta-config"]),T.Ay.success("\u2705 Configuraci\xf3n guardada")},onError:e=>{var s,i;T.Ay.error((null===(s=e.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.error)||"Error guardando configuraci\xf3n")}}),n=k({mutationFn:C.O.testMessage,onSuccess:()=>{T.Ay.success("\u2705 Mensaje de prueba enviado")},onError:e=>{var s,i;T.Ay.error((null===(s=e.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.error)||"Error enviando test")}});return{config:s,isLoading:i,error:a,saveConfig:t.mutate,testMessage:n.mutate,isSaving:t.isPending,isTesting:n.isPending}}function S(){return(0,c.I)({queryKey:["health"],queryFn:C.HN.getHealth,refetchInterval:3e4,staleTime:1e4})}},9875:(e,s,i)=>{i.d(s,{A:()=>a});const a=(0,i(8995).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}}]);
//# sourceMappingURL=340.a37731f8.chunk.js.map