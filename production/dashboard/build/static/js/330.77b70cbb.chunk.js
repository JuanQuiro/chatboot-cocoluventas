"use strict";(self.webpackChunkcocolu_dashboard=self.webpackChunkcocolu_dashboard||[]).push([[330],{4330:(e,s,a)=>{a.r(s),a.d(s,{default:()=>M});var t=a(2555),i=a(5043),n=a(4634),r=a(7104),c=a(4919),d=a(3062),l=a(8646),o=a(108),h=a(163),x=a(4240),m=a(7869),j=a(6150),u=a(1327),g=a(2291),v=a(7734),y=a(2185),p=a(6026),N=a(8643),f=a(5748),b=a(168),A=a(579);const C=["#667eea","#4ade80","#f59e0b","#ef4444","#8b5cf6"];function M(){const[e,s]=(0,i.useState)({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0]}),{data:a,isLoading:M}=(0,n.W4)(e),T=(null===a||void 0===a?void 0:a.data)||{summary:{totalMessages:15420,totalCost:2314.5,averageCostPerMessage:.15},messageTypes:[{name:"Marketing",count:8420,cost:1263},{name:"Utility",count:5200,cost:780},{name:"Authentication",count:1800,cost:271.5}],categories:[{name:"Texto",count:12e3,cost:1800},{name:"Imagen",count:2420,cost:363},{name:"Documento",count:800,cost:120},{name:"Video",count:200,cost:31.5}],monthly:[{month:"Nov",messages:15420,cost:2314.5},{month:"Oct",messages:14280,cost:2142},{month:"Sep",messages:13890,cost:2083.5},{month:"Ago",messages:16200,cost:2430},{month:"Jul",messages:14950,cost:2242.5},{month:"Jun",messages:15680,cost:2352}]};return M?(0,A.jsxs)("div",{className:"billing-page loading",children:[(0,A.jsx)("div",{className:"spinner"}),(0,A.jsx)("p",{children:"Cargando datos de facturaci\xf3n..."})]}):(0,A.jsxs)("div",{className:"billing-page",children:[(0,A.jsxs)("div",{className:"page-header",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h1",{children:"\ud83d\udcb0 Facturaci\xf3n Meta"}),(0,A.jsx)("p",{className:"subtitle",children:"WhatsApp Business API - Costos y M\xe9tricas"})]}),(0,A.jsxs)("button",{className:"btn-export",children:[(0,A.jsx)(r.A,{size:16}),"Exportar Reporte"]})]}),(0,A.jsx)("div",{className:"date-selector",children:(0,A.jsxs)("div",{className:"date-inputs",children:[(0,A.jsxs)("div",{className:"date-group",children:[(0,A.jsx)("label",{children:"Desde"}),(0,A.jsx)("input",{type:"date",value:e.startDate,onChange:a=>s((0,t.A)((0,t.A)({},e),{},{startDate:a.target.value})),className:"date-input"})]}),(0,A.jsxs)("div",{className:"date-group",children:[(0,A.jsx)("label",{children:"Hasta"}),(0,A.jsx)("input",{type:"date",value:e.endDate,onChange:a=>s((0,t.A)((0,t.A)({},e),{},{endDate:a.target.value})),className:"date-input"})]})]})}),(0,A.jsxs)("div",{className:"summary-grid",children:[(0,A.jsxs)("div",{className:"summary-card",children:[(0,A.jsx)("div",{className:"card-icon messages",children:(0,A.jsx)(c.A,{size:24})}),(0,A.jsxs)("div",{className:"card-content",children:[(0,A.jsx)("div",{className:"card-label",children:"Total Mensajes"}),(0,A.jsx)("div",{className:"card-value",children:T.summary.totalMessages.toLocaleString()})]})]}),(0,A.jsxs)("div",{className:"summary-card",children:[(0,A.jsx)("div",{className:"card-icon cost",children:(0,A.jsx)(d.A,{size:24})}),(0,A.jsxs)("div",{className:"card-content",children:[(0,A.jsx)("div",{className:"card-label",children:"Costo Total"}),(0,A.jsxs)("div",{className:"card-value",children:["$",T.summary.totalCost.toFixed(2)]})]})]}),(0,A.jsxs)("div",{className:"summary-card",children:[(0,A.jsx)("div",{className:"card-icon average",children:(0,A.jsx)(l.A,{size:24})}),(0,A.jsxs)("div",{className:"card-content",children:[(0,A.jsx)("div",{className:"card-label",children:"Promedio por Mensaje"}),(0,A.jsxs)("div",{className:"card-value",children:["$",T.summary.averageCostPerMessage.toFixed(4)]})]})]})]}),(0,A.jsxs)("div",{className:"charts-grid",children:[(0,A.jsxs)("div",{className:"chart-card",children:[(0,A.jsx)("h3",{children:"\ud83d\udcca Por Tipo de Mensaje"}),(0,A.jsx)(o.u,{width:"100%",height:300,children:(0,A.jsxs)(h.r,{children:[(0,A.jsx)(x.F,{data:T.messageTypes,dataKey:"cost",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:e=>"$".concat(e.cost.toFixed(0)),children:T.messageTypes.map((e,s)=>(0,A.jsx)(m.f,{fill:C[s%C.length]},"cell-".concat(s)))}),(0,A.jsx)(j.m,{formatter:e=>"$".concat(e.toFixed(2))}),(0,A.jsx)(u.s,{})]})})]}),(0,A.jsxs)("div",{className:"chart-card",children:[(0,A.jsx)("h3",{children:"\ud83d\udcc2 Por Categor\xeda"}),(0,A.jsx)(o.u,{width:"100%",height:300,children:(0,A.jsxs)(g.E,{data:T.categories,children:[(0,A.jsx)(v.d,{strokeDasharray:"3 3"}),(0,A.jsx)(y.W,{dataKey:"name"}),(0,A.jsx)(p.h,{}),(0,A.jsx)(j.m,{formatter:e=>"$".concat(e.toFixed(2))}),(0,A.jsx)(u.s,{}),(0,A.jsx)(N.y,{dataKey:"cost",fill:"#667eea",name:"Costo ($)"})]})})]}),(0,A.jsxs)("div",{className:"chart-card full-width",children:[(0,A.jsx)("h3",{children:"\ud83d\udcc8 Tendencia Mensual"}),(0,A.jsx)(o.u,{width:"100%",height:300,children:(0,A.jsxs)(f.b,{data:T.monthly,children:[(0,A.jsx)(v.d,{strokeDasharray:"3 3"}),(0,A.jsx)(y.W,{dataKey:"month"}),(0,A.jsx)(p.h,{yAxisId:"left"}),(0,A.jsx)(p.h,{yAxisId:"right",orientation:"right"}),(0,A.jsx)(j.m,{}),(0,A.jsx)(u.s,{}),(0,A.jsx)(b.N,{yAxisId:"left",type:"monotone",dataKey:"messages",stroke:"#4ade80",name:"Mensajes",strokeWidth:2}),(0,A.jsx)(b.N,{yAxisId:"right",type:"monotone",dataKey:"cost",stroke:"#667eea",name:"Costo ($)",strokeWidth:2})]})})]})]}),(0,A.jsxs)("div",{className:"pricing-section",children:[(0,A.jsx)("h2",{children:"\ud83d\udcb5 Tarifas Actuales de Meta"}),(0,A.jsx)("div",{className:"pricing-table-container",children:(0,A.jsxs)("table",{className:"pricing-table",children:[(0,A.jsx)("thead",{children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{children:"Tipo de Mensaje"}),(0,A.jsx)("th",{children:"Categor\xeda"}),(0,A.jsx)("th",{children:"Costo (USD)"}),(0,A.jsx)("th",{children:"Descripci\xf3n"})]})}),(0,A.jsxs)("tbody",{children:[(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:"Marketing"}),(0,A.jsx)("td",{children:"Promocional"}),(0,A.jsx)("td",{children:"$0.15"}),(0,A.jsx)("td",{children:"Mensajes promocionales y ofertas"})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:"Utility"}),(0,A.jsx)("td",{children:"Transaccional"}),(0,A.jsx)("td",{children:"$0.15"}),(0,A.jsx)("td",{children:"Confirmaciones, actualizaciones"})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:"Authentication"}),(0,A.jsx)("td",{children:"OTP"}),(0,A.jsx)("td",{children:"$0.15"}),(0,A.jsx)("td",{children:"C\xf3digos de verificaci\xf3n"})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:"Service"}),(0,A.jsx)("td",{children:"Atenci\xf3n"}),(0,A.jsx)("td",{children:"$0.00"}),(0,A.jsx)("td",{children:"Respuestas dentro de 24h (gratis)"})]})]})]})}),(0,A.jsx)("p",{className:"pricing-note",children:"* Precios para regi\xf3n Am\xe9rica Latina. Pueden variar seg\xfan pa\xeds."})]})]})}},4634:(e,s,a)=>{a.d(s,{Vp:()=>d,W4:()=>o,Wz:()=>l});var t=a(2532),i=a(3248),n=a(7097),r=a(6305),c=a(3768);function d(){const e=(0,i.jE)(),{data:s,isLoading:a,error:d}=(0,t.I)({queryKey:["meta-config"],queryFn:r.O.getConfig,staleTime:3e4}),l=(0,n.n)({mutationFn:r.O.saveConfig,onSuccess:()=>{e.invalidateQueries(["meta-config"]),c.Ay.success("\u2705 Configuraci\xf3n guardada")},onError:e=>{var s,a;c.Ay.error((null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.error)||"Error guardando configuraci\xf3n")}}),o=(0,n.n)({mutationFn:r.O.testMessage,onSuccess:()=>{c.Ay.success("\u2705 Mensaje de prueba enviado")},onError:e=>{var s,a;c.Ay.error((null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.error)||"Error enviando test")}});return{config:s,isLoading:a,error:d,saveConfig:l.mutate,testMessage:o.mutate,isSaving:l.isPending,isTesting:o.isPending}}function l(){return(0,t.I)({queryKey:["health"],queryFn:r.HN.getHealth,refetchInterval:3e4,staleTime:1e4})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.I)({queryKey:["meta-billing",e],queryFn:()=>r.O.getBilling(e),staleTime:6e4})}}}]);
//# sourceMappingURL=330.77b70cbb.chunk.js.map