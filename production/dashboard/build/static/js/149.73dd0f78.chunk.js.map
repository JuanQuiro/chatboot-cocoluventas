{"version":3,"file":"static/js/149.73dd0f78.chunk.js","mappings":"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","sources":["pages/Settings.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport '../styles/Settings.css';\n\nexport default function Settings() {\n  const [settings, setSettings] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [editingKey, setEditingKey] = useState(null);\n  const [editingValue, setEditingValue] = useState('');\n  const [newKey, setNewKey] = useState('');\n  const [newValue, setNewValue] = useState('');\n\n  // Cargar configuraci√≥n\n  useEffect(() => {\n    fetchSettings();\n  }, []);\n\n  const fetchSettings = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch('/api/settings');\n      const data = await response.json();\n      \n      if (data.success) {\n        setSettings(data.settings);\n        setError(null);\n      } else {\n        setError(data.error || 'Error al cargar configuraci√≥n');\n      }\n    } catch (err) {\n      setError('Error al conectar con el servidor');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUpdateSetting = async (key, value) => {\n    try {\n      const response = await fetch(`/api/settings/${key}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ value })\n      });\n\n      const data = await response.json();\n      \n      if (data.success) {\n        setSuccess(`‚úÖ ${key} actualizado correctamente`);\n        setEditingKey(null);\n        fetchSettings();\n        setTimeout(() => setSuccess(null), 3000);\n      } else {\n        setError(data.error || 'Error al actualizar');\n      }\n    } catch (err) {\n      setError('Error al conectar con el servidor');\n      console.error(err);\n    }\n  };\n\n  const handleAddSetting = async () => {\n    if (!newKey.trim() || !newValue.trim()) {\n      setError('Clave y valor son requeridos');\n      return;\n    }\n\n    try {\n      const response = await fetch('/api/settings', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ settings: { [newKey]: newValue } })\n      });\n\n      const data = await response.json();\n      \n      if (data.success) {\n        setSuccess(`‚úÖ ${newKey} agregado correctamente`);\n        setNewKey('');\n        setNewValue('');\n        fetchSettings();\n        setTimeout(() => setSuccess(null), 3000);\n      } else {\n        setError(data.error || 'Error al agregar');\n      }\n    } catch (err) {\n      setError('Error al conectar con el servidor');\n      console.error(err);\n    }\n  };\n\n  const handleDeleteSetting = async (key) => {\n    if (!window.confirm(`¬øEst√°s seguro de que deseas eliminar ${key}?`)) {\n      return;\n    }\n\n    try {\n      const response = await fetch(`/api/settings/${key}`, {\n        method: 'DELETE'\n      });\n\n      const data = await response.json();\n      \n      if (data.success) {\n        setSuccess(`‚úÖ ${key} eliminado correctamente`);\n        fetchSettings();\n        setTimeout(() => setSuccess(null), 3000);\n      } else {\n        setError(data.error || 'Error al eliminar');\n      }\n    } catch (err) {\n      setError('Error al conectar con el servidor');\n      console.error(err);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"settings-container\">\n        <div className=\"loading\">Cargando configuraci√≥n...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"settings-container\">\n      <div className=\"settings-header\">\n        <h1>‚öôÔ∏è Configuraci√≥n del Bot</h1>\n        <p>Gestiona las variables de entorno (.env) del bot</p>\n      </div>\n\n      {error && <div className=\"alert alert-error\">{error}</div>}\n      {success && <div className=\"alert alert-success\">{success}</div>}\n\n      {/* Secci√≥n: Agregar nueva variable */}\n      <div className=\"settings-section\">\n        <h2>‚ûï Agregar Nueva Variable</h2>\n        <div className=\"add-setting-form\">\n          <input\n            type=\"text\"\n            placeholder=\"Nombre de la variable (ej: BOT_ADAPTER)\"\n            value={newKey}\n            onChange={(e) => setNewKey(e.target.value.toUpperCase())}\n            className=\"input-field\"\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Valor (ej: meta)\"\n            value={newValue}\n            onChange={(e) => setNewValue(e.target.value)}\n            className=\"input-field\"\n          />\n          <button onClick={handleAddSetting} className=\"btn btn-primary\">\n            Agregar Variable\n          </button>\n        </div>\n      </div>\n\n      {/* Secci√≥n: Variables existentes */}\n      <div className=\"settings-section\">\n        <h2>üìã Variables Actuales</h2>\n        <div className=\"settings-list\">\n          {Object.entries(settings).length === 0 ? (\n            <p className=\"no-settings\">No hay variables configuradas</p>\n          ) : (\n            Object.entries(settings).map(([key, data]) => (\n              <div key={key} className=\"setting-item\">\n                <div className=\"setting-key\">\n                  <span className=\"key-name\">{key}</span>\n                  {data.isSensitive && <span className=\"sensitive-badge\">üîí Sensible</span>}\n                </div>\n                \n                {editingKey === key ? (\n                  <div className=\"setting-edit\">\n                    <input\n                      type=\"text\"\n                      value={editingValue}\n                      onChange={(e) => setEditingValue(e.target.value)}\n                      className=\"input-field\"\n                      autoFocus\n                    />\n                    <button\n                      onClick={() => handleUpdateSetting(key, editingValue)}\n                      className=\"btn btn-success btn-sm\"\n                    >\n                      Guardar\n                    </button>\n                    <button\n                      onClick={() => setEditingKey(null)}\n                      className=\"btn btn-secondary btn-sm\"\n                    >\n                      Cancelar\n                    </button>\n                  </div>\n                ) : (\n                  <div className=\"setting-value\">\n                    <code>{data.value}</code>\n                    <div className=\"setting-actions\">\n                      <button\n                        onClick={() => {\n                          setEditingKey(key);\n                          setEditingValue(data.original || data.value);\n                        }}\n                        className=\"btn btn-edit btn-sm\"\n                      >\n                        ‚úèÔ∏è Editar\n                      </button>\n                      <button\n                        onClick={() => handleDeleteSetting(key)}\n                        className=\"btn btn-danger btn-sm\"\n                      >\n                        üóëÔ∏è Eliminar\n                      </button>\n                    </div>\n                  </div>\n                )}\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n\n      {/* Secci√≥n: Informaci√≥n importante */}\n      <div className=\"settings-section info-section\">\n        <h2>‚ÑπÔ∏è Informaci√≥n Importante</h2>\n        <ul className=\"info-list\">\n          <li><strong>BOT_ADAPTER</strong>: Selecciona el adaptador (meta, baileys, etc.)</li>\n          <li><strong>META_JWT_TOKEN</strong>: Token de autenticaci√≥n de Meta Business API</li>\n          <li><strong>META_NUMBER_ID</strong>: ID del n√∫mero de WhatsApp Business</li>\n          <li><strong>META_VERIFY_TOKEN</strong>: Token para verificar webhooks de Meta</li>\n          <li><strong>PORT</strong>: Puerto en el que corre el bot (por defecto 3008)</li>\n          <li className=\"warning\">‚ö†Ô∏è Los cambios se guardan inmediatamente en el archivo .env</li>\n          <li className=\"warning\">‚ö†Ô∏è Algunos cambios pueden requerir reiniciar el contenedor</li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n"],"names":["Settings","settings","setSettings","useState","loading","setLoading","error","setError","success","setSuccess","editingKey","setEditingKey","editingValue","setEditingValue","newKey","setNewKey","newValue","setNewValue","useEffect","fetchSettings","async","response","fetch","data","json","err","console","_jsx","className","children","_jsxs","type","placeholder","value","onChange","e","target","toUpperCase","onClick","trim","method","headers","body","JSON","stringify","concat","setTimeout","Object","entries","length","map","_ref","key","isSensitive","autoFocus","handleUpdateSetting","original","window","confirm","handleDeleteSetting"],"sourceRoot":""}