/*! For license information please see 903.56bb682f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkcocolu_dashboard=self.webpackChunkcocolu_dashboard||[]).push([[903],{2903:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var n=a(2555),i=a(5043),r=a(4634),o=a(4319),l=a(9875),c=a(8995);const t=(0,c.A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),d=(0,c.A)("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),u=(0,c.A)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var h=a(3768),x=a(579);function p(){const{config:e,saveConfig:s,testMessage:a,isSaving:c,isTesting:p}=(0,r.Vp)(),[v,m]=i.useState({});i.useEffect(()=>{e&&m(e)},[e]);const j=(e,s)=>{navigator.clipboard.writeText(e),h.Ay.success("\u2705 ".concat(s," copiado"))};if(!e)return(0,x.jsxs)("div",{className:"meta-setup loading",children:[(0,x.jsx)("div",{className:"spinner"}),(0,x.jsx)("p",{children:"Cargando configuraci\xf3n..."})]});const f=v.jwtToken&&v.numberId&&v.businessId;return(0,x.jsxs)("div",{className:"meta-setup",children:[(0,x.jsxs)("div",{className:"page-header",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h1",{children:"\ud83c\udf10 Configuraci\xf3n Meta WhatsApp"}),(0,x.jsx)("p",{className:"subtitle",children:"WhatsApp Business API Setup"})]}),(0,x.jsx)("div",{className:"header-badge",children:f?(0,x.jsxs)("span",{className:"status-badge configured",children:[(0,x.jsx)(o.A,{size:16}),"Configurado"]}):(0,x.jsxs)("span",{className:"status-badge missing",children:[(0,x.jsx)(l.A,{size:16}),"Sin configurar"]})})]}),(0,x.jsxs)("div",{className:"info-section",children:[(0,x.jsxs)("div",{className:"info-card webhook",children:[(0,x.jsx)("div",{className:"info-label",children:"Webhook URL para Meta"}),(0,x.jsxs)("div",{className:"info-value-group",children:[(0,x.jsx)("code",{className:"info-value",children:v.webhookUrl}),(0,x.jsx)("button",{onClick:()=>j(v.webhookUrl,"Webhook URL"),className:"btn-copy",children:(0,x.jsx)(t,{size:16})})]}),(0,x.jsx)("p",{className:"info-help",children:"Configura este URL en Meta Developers"})]}),(0,x.jsxs)("div",{className:"info-card token",children:[(0,x.jsx)("div",{className:"info-label",children:"Verify Token"}),(0,x.jsxs)("div",{className:"info-value-group",children:[(0,x.jsx)("code",{className:"info-value",children:v.verifyToken}),(0,x.jsx)("button",{onClick:()=>j(v.verifyToken,"Verify Token"),className:"btn-copy",children:(0,x.jsx)(t,{size:16})})]}),(0,x.jsx)("p",{className:"info-help",children:"Usa este token para verificar el webhook"})]})]}),(0,x.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(v)},className:"config-form",children:[(0,x.jsxs)("div",{className:"form-section",children:[(0,x.jsx)("h2",{children:"\ud83d\udcdd Credenciales Meta"}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{children:"JWT Token (Access Token)"}),(0,x.jsx)("input",{type:"password",value:v.jwtToken||"",onChange:e=>m((0,n.A)((0,n.A)({},v),{},{jwtToken:e.target.value})),placeholder:"EAAxxxxxxxxxxxxx...",className:"form-input"}),(0,x.jsx)("span",{className:"help-text",children:"Obt\xe9n tu Access Token desde Meta Developers \u2192 App Settings"})]}),(0,x.jsxs)("div",{className:"form-row",children:[(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{children:"Phone Number ID"}),(0,x.jsx)("input",{type:"text",value:v.numberId||"",onChange:e=>m((0,n.A)((0,n.A)({},v),{},{numberId:e.target.value})),placeholder:"123456789012345",className:"form-input"})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{children:"Business Account ID"}),(0,x.jsx)("input",{type:"text",value:v.businessId||"",onChange:e=>m((0,n.A)((0,n.A)({},v),{},{businessId:e.target.value})),placeholder:"987654321098765",className:"form-input"})]})]}),(0,x.jsxs)("div",{className:"form-row",children:[(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{children:"API Version"}),(0,x.jsxs)("select",{value:v.apiVersion||"v22.0",onChange:e=>m((0,n.A)((0,n.A)({},v),{},{apiVersion:e.target.value})),className:"form-input",children:[(0,x.jsx)("option",{value:"v18.0",children:"v18.0"}),(0,x.jsx)("option",{value:"v19.0",children:"v19.0"}),(0,x.jsx)("option",{value:"v20.0",children:"v20.0"}),(0,x.jsx)("option",{value:"v21.0",children:"v21.0"}),(0,x.jsx)("option",{value:"v22.0",children:"v22.0 (Latest)"})]})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{children:"N\xfamero de Tel\xe9fono (para pruebas)"}),(0,x.jsx)("input",{type:"tel",value:v.phoneNumber||"",onChange:e=>m((0,n.A)((0,n.A)({},v),{},{phoneNumber:e.target.value})),placeholder:"+1xxxxxxxxxx",className:"form-input"})]})]})]}),(0,x.jsx)("div",{className:"form-actions",children:(0,x.jsxs)("div",{className:"actions-right",children:[(0,x.jsxs)("button",{type:"button",onClick:()=>{a({to:v.phoneNumber,message:"\ud83e\uddea Test desde Dashboard - "+(new Date).toLocaleString()})},disabled:!f||p,className:"btn-test",children:[(0,x.jsx)(d,{size:16}),p?"Enviando...":"Enviar Test"]}),(0,x.jsxs)("button",{type:"submit",disabled:c,className:"btn-save",children:[(0,x.jsx)(u,{size:16}),c?"Guardando...":"Guardar Configuraci\xf3n"]})]})})]}),(0,x.jsxs)("div",{className:"instructions-section",children:[(0,x.jsx)("h2",{children:"\ud83d\udcd6 Instrucciones"}),(0,x.jsxs)("ol",{className:"instructions-list",children:[(0,x.jsxs)("li",{children:["Ve a ",(0,x.jsx)("a",{href:"https://developers.facebook.com",target:"_blank",rel:"noopener noreferrer",children:"Meta Developers"})]}),(0,x.jsx)("li",{children:"Selecciona tu App de WhatsApp Business API"}),(0,x.jsx)("li",{children:'En "WhatsApp" \u2192 "Configuration", configura el Webhook URL y Verify Token'}),(0,x.jsx)("li",{children:'Copia tu Access Token desde "App Settings" \u2192 "Basic"'}),(0,x.jsx)("li",{children:"Obt\xe9n tu Phone Number ID y Business Account ID"}),(0,x.jsx)("li",{children:"P\xe9galos aqu\xed y guarda la configuraci\xf3n"}),(0,x.jsx)("li",{children:"Haz una prueba enviando un mensaje de test"})]})]})]})}},4634:(e,s,a)=>{a.d(s,{Vp:()=>c,Wz:()=>t});var n=a(2532),i=a(3248),r=a(7097),o=a(6305),l=a(3768);function c(){const e=(0,i.jE)(),{data:s,isLoading:a,error:c}=(0,n.I)({queryKey:["meta-config"],queryFn:o.O.getConfig,staleTime:3e4}),t=(0,r.n)({mutationFn:o.O.saveConfig,onSuccess:()=>{e.invalidateQueries(["meta-config"]),l.Ay.success("\u2705 Configuraci\xf3n guardada")},onError:e=>{var s,a;l.Ay.error((null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.error)||"Error guardando configuraci\xf3n")}}),d=(0,r.n)({mutationFn:o.O.testMessage,onSuccess:()=>{l.Ay.success("\u2705 Mensaje de prueba enviado")},onError:e=>{var s,a;l.Ay.error((null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.error)||"Error enviando test")}});return{config:s,isLoading:a,error:c,saveConfig:t.mutate,testMessage:d.mutate,isSaving:t.isPending,isTesting:d.isPending}}function t(){return(0,n.I)({queryKey:["health"],queryFn:o.HN.getHealth,refetchInterval:3e4,staleTime:1e4})}}}]);
//# sourceMappingURL=903.56bb682f.chunk.js.map