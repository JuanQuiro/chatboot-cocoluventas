/*! For license information please see 855.bc58cc99.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkcocolu_dashboard=self.webpackChunkcocolu_dashboard||[]).push([[855],{4319:(e,s,i)=>{i.d(s,{A:()=>c});const c=(0,i(8995).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8995:(e,s,i)=>{i.d(s,{A:()=>t});var c=i(2555);var a=i(5043),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const n=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],t=(e,s)=>{const i=(0,a.forwardRef)((i,t)=>{let{color:l="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:h,className:u="",children:m}=i,x=function(e,s){if(null==e)return{};var i,c,a=function(e,s){if(null==e)return{};var i={};for(var c in e)if({}.hasOwnProperty.call(e,c)){if(-1!==s.indexOf(c))continue;i[c]=e[c]}return i}(e,s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)i=r[c],-1===s.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}(i,n);return(0,a.createElement)("svg",(0,c.A)((0,c.A)({ref:t},r),{},{width:o,height:o,stroke:l,strokeWidth:h?24*Number(d)/Number(o):d,className:["lucide","lucide-".concat((j=e,j.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),u].join(" ")},x),[...s.map(e=>{let[s,i]=e;return(0,a.createElement)(s,i)}),...Array.isArray(m)?m:[m]]);var j});return i.displayName="".concat(e),i}},9855:(e,s,i)=>{i.r(s),i.d(s,{default:()=>u});var c=i(2555),a=i(5043),r=i(4319),n=i(9875),t=i(8995);const l=(0,t.A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),o=(0,t.A)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var d=i(3768),h=i(579);function u(){const[e,s]=(0,a.useState)(null),[i,t]=(0,a.useState)(null),[u,m]=(0,a.useState)(!1),x=[{id:"jwt",label:"JWT Token configurado",check:()=>fetch("/api/meta/config").then(e=>e.json()).then(e=>!!e.jwtToken)},{id:"number",label:"Phone Number ID configurado",check:()=>fetch("/api/meta/config").then(e=>e.json()).then(e=>!!e.numberId)},{id:"business",label:"Business Account ID configurado",check:()=>fetch("/api/meta/config").then(e=>e.json()).then(e=>!!e.businessId)},{id:"webhook",label:"Webhook URL accesible",check:()=>Promise.resolve(!0)}],[j,g]=(0,a.useState)(x.map(e=>(0,c.A)((0,c.A)({},e),{},{status:"pending"})));return(0,h.jsxs)("div",{className:"diagnostics-page",children:[(0,h.jsx)("div",{className:"page-header",children:(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{children:"\ud83e\uddea Diagn\xf3stico Meta"}),(0,h.jsx)("p",{className:"subtitle",children:"Tests y validaci\xf3n de configuraci\xf3n"})]})}),(0,h.jsxs)("div",{className:"diagnostic-section",children:[(0,h.jsxs)("div",{className:"section-header",children:[(0,h.jsx)("h2",{children:"\ud83d\udccb Checklist de Configuraci\xf3n"}),(0,h.jsx)("button",{onClick:async()=>{for(const s of x)try{const e=await s.check();g(i=>i.map(i=>i.id===s.id?(0,c.A)((0,c.A)({},i),{},{status:e?"success":"error"}):i))}catch(e){g(e=>e.map(e=>e.id===s.id?(0,c.A)((0,c.A)({},e),{},{status:"error"}):e))}},className:"btn-check",children:"Verificar Todo"})]}),(0,h.jsx)("div",{className:"checklist",children:j.map(e=>(0,h.jsxs)("div",{className:"checklist-item ".concat(e.status),children:[(0,h.jsxs)("div",{className:"check-icon",children:["success"===e.status&&(0,h.jsx)(r.A,{size:20}),"error"===e.status&&(0,h.jsx)(n.A,{size:20}),"pending"===e.status&&(0,h.jsx)(l,{size:20})]}),(0,h.jsx)("span",{className:"check-label",children:e.label})]},e.id))})]}),(0,h.jsxs)("div",{className:"diagnostic-section",children:[(0,h.jsxs)("div",{className:"section-header",children:[(0,h.jsx)("h2",{children:"\ud83d\udce1 Test de Conectividad"}),(0,h.jsxs)("button",{onClick:async()=>{m(!0),s(null);try{const e=await fetch("/api/meta/test-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"\ud83e\ude7a Health Check - "+(new Date).toLocaleString()})}),i=await e.json();s({success:i.success,data:i,timestamp:Date.now()}),i.success?d.Ay.success("\u2705 Ping exitoso"):d.Ay.error("\u274c Ping fallido")}catch(e){s({success:!1,error:e.message,timestamp:Date.now()}),d.Ay.error("Error en ping")}finally{m(!1)}},disabled:u,className:"btn-ping",children:[(0,h.jsx)(o,{size:16}),u?"Enviando...":"Enviar Ping"]})]}),e&&(0,h.jsxs)("div",{className:"test-result ".concat(e.success?"success":"error"),children:[(0,h.jsx)("div",{className:"result-header",children:e.success?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.A,{size:24}),(0,h.jsx)("h3",{children:"\u2705 Ping Exitoso"})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(n.A,{size:24}),(0,h.jsx)("h3",{children:"\u274c Ping Fallido"})]})}),(0,h.jsx)("pre",{className:"result-details",children:JSON.stringify(e.data||e.error,null,2)}),(0,h.jsx)("div",{className:"result-timestamp",children:new Date(e.timestamp).toLocaleString()})]})]}),(0,h.jsxs)("div",{className:"diagnostic-section",children:[(0,h.jsx)("h2",{children:"\ud83d\udcd6 Instrucciones de Troubleshooting"}),(0,h.jsxs)("div",{className:"troubleshooting-guide",children:[(0,h.jsxs)("div",{className:"trouble-item",children:[(0,h.jsx)("h3",{children:"\u26a0\ufe0f Si el JWT Token falla:"}),(0,h.jsxs)("ul",{children:[(0,h.jsx)("li",{children:"Verifica que el token sea v\xe1lido en Meta Developers"}),(0,h.jsx)("li",{children:"Los tokens pueden expirar, genera uno nuevo"}),(0,h.jsx)("li",{children:"Aseg\xfarate de copiar el token completo"})]})]}),(0,h.jsxs)("div",{className:"trouble-item",children:[(0,h.jsx)("h3",{children:"\u26a0\ufe0f Si el Ping falla:"}),(0,h.jsxs)("ul",{children:[(0,h.jsx)("li",{children:"Verifica tu conexi\xf3n a internet"}),(0,h.jsx)("li",{children:"Revisa que el Phone Number ID sea correcto"}),(0,h.jsx)("li",{children:"Confirma que la API de Meta est\xe9 operativa"})]})]}),(0,h.jsxs)("div",{className:"trouble-item",children:[(0,h.jsx)("h3",{children:"\u26a0\ufe0f Si el Webhook falla:"}),(0,h.jsxs)("ul",{children:[(0,h.jsx)("li",{children:"Verifica que el URL sea accesible p\xfablicamente"}),(0,h.jsx)("li",{children:"Confirma que el Verify Token coincida"}),(0,h.jsx)("li",{children:"Revisa los logs del servidor"})]})]})]})]})]})}},9875:(e,s,i)=>{i.d(s,{A:()=>c});const c=(0,i(8995).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}}]);
//# sourceMappingURL=855.bc58cc99.chunk.js.map